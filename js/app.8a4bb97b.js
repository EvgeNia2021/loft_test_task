(function(){var t={1404:function(t,e,a){"use strict";var n=a(9963),o=a(6252);function i(t,e,a,n,i,r){const c=(0,o.up)("router-view");return(0,o.wg)(),(0,o.j4)(c)}var r={name:"App",components:{},mounted(){}},c=a(3744);const s=(0,c.Z)(r,[["render",i]]);var d=s,l=a(2119);const u=t=>((0,o.dD)("data-v-fad69366"),t=t(),(0,o.Cn)(),t),_={class:"g-container"},m=u((()=>(0,o._)("div",{class:"main__title"},"Рыба главной страницы, нажмите на корзину",-1)));function p(t,e,a,n,i,r){const c=(0,o.up)("Navigation");return(0,o.wg)(),(0,o.iD)("div",_,[m,(0,o.Wm)(c)])}const v={class:"nav"},h={class:"nav__list"},f={class:"nav__item"},g={class:"nav__item"};function C(t,e,a,n,i,r){return(0,o.wg)(),(0,o.iD)("nav",v,[(0,o._)("ul",h,[(0,o._)("li",f,[(0,o._)("a",{onClick:e[0]||(e[0]=e=>t.$router.push({name:"MainPage"}))},"Главная /")]),(0,o._)("li",g,[(0,o._)("a",{onClick:e[1]||(e[1]=e=>t.$router.push({name:"Cart"}))},"Корзина")])])])}var I={name:"NavigationComponent",components:{}};const b=(0,c.Z)(I,[["render",C],["__scopeId","data-v-f37b2150"]]);var k=b,y={name:"MainPage",components:{Navigation:k}};const T=(0,c.Z)(y,[["render",p],["__scopeId","data-v-fad69366"]]);var x=T,M=a(3577);const w=t=>((0,o.dD)("data-v-4048c126"),t=t(),(0,o.Cn)(),t),O={class:"g-container"},S={class:"cart"},N=w((()=>(0,o._)("div",{class:"cart__title"},"Корзина",-1))),D={class:"cart__table"},E={class:"header"},j={class:"header__counter counter"},q=w((()=>(0,o._)("div",{class:"counter__title"},"Выделено",-1))),Q={class:"counter__number"},z=w((()=>(0,o._)("div",{class:"btn__cross"},null,-1))),A=w((()=>(0,o._)("div",{class:"btn__text"},"Удалить отмеченные",-1))),P=[z,A],W={class:"cart__list list"},H={class:"cart__footer footer"},Z={class:"footer__group"},$={class:"cart__beforeTax tax"},R=w((()=>(0,o._)("div",{class:"tax__title"},"Промежуточный итог по корзине:",-1))),U={class:"tax__sum"},K={class:"cart__tax tax"},L=w((()=>(0,o._)("div",{class:"tax__title"},"В том числе НДС:",-1))),F={class:"tax__sum"},G={class:"cart__total total"},Y=w((()=>(0,o._)("div",{class:"total__title"},"Итого:",-1))),B={class:"total__number"};function J(t,e,a,n,i,r){const c=(0,o.up)("Navigation"),s=(0,o.up)("ItemComponent");return(0,o.wg)(),(0,o.iD)("div",O,[(0,o.Wm)(c),(0,o._)("div",S,[N,(0,o._)("div",D,[(0,o._)("div",E,[(0,o._)("div",j,[q,(0,o._)("div",Q,(0,M.zw)(i.checked.length),1)]),(0,o._)("div",{class:"header__btn btn",onClick:e[0]||(e[0]=t=>r.OnDeleteChecked(i.checked))},P)]),(0,o._)("ul",W,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.products,((t,e)=>((0,o.wg)(),(0,o.j4)(s,{key:t.id,product_data:t,index:e,indexToStore:e,totalInCart:i.totalInCart,onSaveNumberToStore:r.OnSaveNumberToStore,onCheckItem:e=>r.OnCheckItem(t),onDeleteChecked:r.OnDeleteChecked},null,8,["product_data","index","indexToStore","totalInCart","onSaveNumberToStore","onCheckItem","onDeleteChecked"])))),128))]),(0,o._)("div",H,[(0,o._)("div",Z,[(0,o._)("div",$,[R,(0,o._)("div",U,(0,M.zw)(t.cartTotal)+" Р",1)]),(0,o._)("div",K,[L,(0,o._)("div",F,(0,M.zw)(r.tax)+" Р",1)])]),(0,o._)("div",G,[Y,(0,o._)("div",B,(0,M.zw)(t.cartTotal)+" Р",1)])])])])])}a(6699);const V=t=>((0,o.dD)("data-v-f0da3e12"),t=t(),(0,o.Cn)(),t),X={class:"item"},tt={class:"item__controls"},et={class:"radio radio--checkbox"},at={class:"radio__title"},nt={class:"item__pic"},ot=["src"],it={class:"item__name"},rt={class:"item__info"},ct={class:"item__price"},st={class:"item__quantity"},dt={class:"item__total"},lt={class:"modal"},ut=V((()=>(0,o._)("div",{class:"modal__title"},"Изменить количество",-1))),_t={class:"modal__change change"},mt={class:"change__price"},pt={type:"number",class:"change__input"},vt={type:"number",class:"change__total"},ht={class:"change__btns btns"};function ft(t,e,n,i,r,c){const s=(0,o.up)("modal"),d=(0,o.Q2)("click-outside");return(0,o.wg)(),(0,o.iD)("li",X,[(0,o._)("div",tt,[(0,o._)("label",et,[(0,o._)("input",{type:"checkbox",class:"radio__elem",onClick:e[0]||(e[0]=t=>c.checkItem(n.product_data))}),(0,o._)("div",at,(0,M.zw)(n.index+1),1)])]),(0,o._)("div",nt,[(0,o._)("img",{class:"item__img",src:a(990)("./"+n.product_data.image),alt:"image"},null,8,ot)]),(0,o._)("div",it,(0,M.zw)(n.product_data.name),1),(0,o._)("div",rt,[(0,o._)("div",ct,(0,M.zw)(n.product_data.price)+" Р",1),(0,o._)("div",st,[(0,o._)("button",{type:"button",class:"item__button",onClick:e[1]||(e[1]=(...t)=>i.toggleModal&&i.toggleModal(...t))},(0,M.zw)(n.product_data.quantity),1)]),(0,o._)("div",dt,(0,M.zw)(c.totalInCart)+" Р",1)]),i.modalActive?((0,o.wg)(),(0,o.j4)(s,{key:0},{modal:(0,o.w5)((()=>[(0,o.wy)(((0,o.wg)(),(0,o.iD)("div",lt,[ut,(0,o._)("div",_t,[(0,o._)("div",mt,(0,M.zw)(n.product_data.price)+" x",1),(0,o._)("button",{type:"button",class:"change__btn",onClick:e[2]||(e[2]=(...t)=>c.decreaseItemQuantity&&c.decreaseItemQuantity(...t))}," - "),(0,o._)("span",pt,(0,M.zw)(i.defQuantityInModal),1),(0,o._)("button",{type:"button",class:"change__btn",onClick:e[3]||(e[3]=(...t)=>c.increaseItemQuantity&&c.increaseItemQuantity(...t))}," + "),(0,o._)("span",vt,(0,M.zw)(c.totalInModal)+" Р",1)]),(0,o._)("div",ht,[(0,o._)("button",{type:"button",class:"btns__save",onClick:e[4]||(e[4]=t=>{c.saveNumberToStore(),i.modalActive=!1})}," сохранить "),(0,o._)("button",{type:"button",class:"btns__decline",onClick:e[5]||(e[5]=t=>{i.closeModal(),i.modalActive=!1})}," отменить ")])])),[[d,c.onClickOutside]])])),_:1})):(0,o.kq)("",!0)])}function gt(t,e,a,n,i,r){return(0,o.WI)(t.$slots,"modal")}var Ct={name:"ModalWindow"};const It=(0,c.Z)(Ct,[["render",gt]]);var bt=It,kt=a(2262),yt=a(425),Tt=a.n(yt),xt={name:"ItemComponent",directives:{clickOutside:Tt().directive},props:{product_data:{type:Object,default(){return{}}},index:{type:Number},indexToStore:{type:Number}},components:{modal:bt},emits:["saveNumberToStore","checkItem","deleteChecked"],data(){return{}},computed:{totalInModal(){let t=this.product_data.price*this.defQuantityInModal;return t},totalInCart(){let t=this.product_data.price*this.product_data.quantity;return t}},setup(){const t=(0,kt.iH)(!1),e=(0,kt.iH)(1),a=()=>{t.value=!t.value},n=()=>{t.value=!1};return{defQuantityInModal:e,modalActive:t,toggleModal:a,closeModal:n}},methods:{saveNumberToStore(){this.$emit("saveNumberToStore",{quantityInModal:this.defQuantityInModal,indexToStore:this.indexToStore,totalInCart:this.totalInCart,totalInModal:this.totalInModal})},increaseItemQuantity(){this.defQuantityInModal++},decreaseItemQuantity(){this.defQuantityInModal>1&&this.defQuantityInModal--},checkItem(t){this.$emit("checkItem",t)},deleteChecked(){this.$emit("deleteChecked")},onClickOutside(){this.modalActive=!1}}};const Mt=(0,c.Z)(xt,[["render",ft],["__scopeId","data-v-f0da3e12"]]);var wt=Mt,Ot=a(3907),St={name:"CartComponent",components:{ItemComponent:wt,Navigation:k},props:["product"],data(){return{checked:[],quantityInModalToCart:Number,indexToStore:Number,totalInCart:Number,totalInModal:Number}},setup(){const t=(0,kt.iH)(1);return{quantityInCart:t}},emits:["saveNumberToStore","deleteChecked"],computed:{...(0,Ot.rn)({products:t=>t.products}),...(0,Ot.Se)(["cartTotal"]),tax(){let t=Math.round(this.cartTotal/100*18);return t}},methods:{...(0,Ot.nv)({saveToStore:"saveToStore",deleteCheckedItem:"deleteCheckedItem"}),OnSaveNumberToStore(t){this.quantityInModalToCart=t.quantityInModal,this.indexToStore=t.indexToStore,this.totalInCart=t.totalInCart,this.totalInModal=t.totalInModal,this.saveToStore({quantityInModalToCart:this.quantityInModalToCart,index:this.indexToStore,totalInCart:this.totalInCart,totalInModal:this.totalInModal})},OnCheckItem(t){if(this.checked.includes(t)){let e=this.checked.indexOf(t);this.checked.splice(e,1)}else this.checked.push(t)},OnDeleteChecked(t){this.deleteCheckedItem(t),this.checked=[]}},async mounted(){}};const Nt=(0,c.Z)(St,[["render",J],["__scopeId","data-v-4048c126"]]);var Dt=Nt,Et=[{path:"/",name:"MainPage",component:x},{path:"/cart",name:"Cart",component:Dt}];const jt=(0,l.p7)({history:(0,l.r5)(),routes:Et});var qt=jt;const Qt=(0,Ot.MT)({state:{products:[{image:"img1.jpg",name:"Нож складной WENGER",price:990,id:1,quantity:1},{image:"img2.jpg",name:"Рюкзак WENGER",price:5500,id:2,quantity:1},{image:"img3.png",name:"Перьевая ручка Waterman",price:450,id:3,quantity:1}]},mutations:{UPDATE_CART:(t,e)=>{t.products[e.index].quantity=e.quantityInModalToCart,e.totalInCart=e.totalInModal},DELETE_CHECKED:(t,e)=>{t.products=t.products.filter((t=>!e.includes(t)))}},actions:{async saveToStore({commit:t},e){t("UPDATE_CART",e)},async deleteCheckedItem({commit:t},e){t("DELETE_CHECKED",e)}},getters:{fetchProducts:t=>t.products,cartTotal:t=>{let e=[];if(t.products.length){for(let a of t.products)e.push(a.price*a.quantity);return e=e.reduce((function(t,e){return t+e})),e}return 0}}});var zt=Qt;const At=(0,n.ri)(d);At.use(qt),At.use(zt),At.mount("#app")},990:function(t,e,a){var n={"./img1.jpg":2476,"./img2.jpg":1213,"./img3.png":2954};function o(t){var e=i(t);return a(e)}function i(t){if(!a.o(n,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return n[t]}o.keys=function(){return Object.keys(n)},o.resolve=i,t.exports=o,o.id=990},2476:function(t,e,a){"use strict";t.exports=a.p+"img/img1.b693e2e5.jpg"},1213:function(t,e,a){"use strict";t.exports=a.p+"img/img2.e19a2ca7.jpg"},2954:function(t,e,a){"use strict";t.exports=a.p+"img/img3.b6fc1ef0.png"}},e={};function a(n){var o=e[n];if(void 0!==o)return o.exports;var i=e[n]={exports:{}};return t[n].call(i.exports,i,i.exports,a),i.exports}a.m=t,function(){var t=[];a.O=function(e,n,o,i){if(!n){var r=1/0;for(l=0;l<t.length;l++){n=t[l][0],o=t[l][1],i=t[l][2];for(var c=!0,s=0;s<n.length;s++)(!1&i||r>=i)&&Object.keys(a.O).every((function(t){return a.O[t](n[s])}))?n.splice(s--,1):(c=!1,i<r&&(r=i));if(c){t.splice(l--,1);var d=o();void 0!==d&&(e=d)}}return e}i=i||0;for(var l=t.length;l>0&&t[l-1][2]>i;l--)t[l]=t[l-1];t[l]=[n,o,i]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){a.d=function(t,e){for(var n in e)a.o(e,n)&&!a.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){a.p="/loft_test_task/"}(),function(){var t={143:0};a.O.j=function(e){return 0===t[e]};var e=function(e,n){var o,i,r=n[0],c=n[1],s=n[2],d=0;if(r.some((function(e){return 0!==t[e]}))){for(o in c)a.o(c,o)&&(a.m[o]=c[o]);if(s)var l=s(a)}for(e&&e(n);d<r.length;d++)i=r[d],a.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return a.O(l)},n=self["webpackChunktest_task"]=self["webpackChunktest_task"]||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))}();var n=a.O(void 0,[998],(function(){return a(1404)}));n=a.O(n)})();
//# sourceMappingURL=app.8a4bb97b.js.map