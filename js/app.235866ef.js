(function(){var t={1551:function(t,e,a){"use strict";var n=a(9963),o=a(6252);function c(t,e,a,n,c,i){const r=(0,o.up)("router-view");return(0,o.wg)(),(0,o.j4)(r)}var i={name:"App"},r=a(3744);const s=(0,r.Z)(i,[["render",c]]);var l=s,u=a(2119);const d=t=>((0,o.dD)("data-v-fad69366"),t=t(),(0,o.Cn)(),t),_={class:"g-container"},p=d((()=>(0,o._)("div",{class:"main__title"},"Рыба главной страницы, нажмите на корзину",-1)));function m(t,e,a,n,c,i){const r=(0,o.up)("Navigation");return(0,o.wg)(),(0,o.iD)("div",_,[p,(0,o.Wm)(r)])}const v={class:"nav"},g={class:"nav__list"},f={class:"nav__item"},h={class:"nav__item"};function b(t,e,a,n,c,i){return(0,o.wg)(),(0,o.iD)("nav",v,[(0,o._)("ul",g,[(0,o._)("li",f,[(0,o._)("a",{onClick:e[0]||(e[0]=e=>t.$router.push({name:"MainPage"}))},"Главная /")]),(0,o._)("li",h,[(0,o._)("a",{onClick:e[1]||(e[1]=e=>t.$router.push({name:"Cart"}))},"Корзина")])])])}var y={name:"NavigationComponent",components:{}};const C=(0,r.Z)(y,[["render",b],["__scopeId","data-v-f37b2150"]]);var k=C,w={name:"MainPage",components:{Navigation:k}};const T=(0,r.Z)(w,[["render",m],["__scopeId","data-v-fad69366"]]);var I=T,x=a(3577);const O=t=>((0,o.dD)("data-v-6a7b86b0"),t=t(),(0,o.Cn)(),t),E={class:"g-container"},M={class:"cart"},D=O((()=>(0,o._)("div",{class:"cart__title"},"Корзина",-1))),j={class:"cart__table"},q={class:"header"},N={class:"header__counter counter"},P=O((()=>(0,o._)("div",{class:"counter__title"},"Выделено",-1))),z={class:"counter__number"},A=O((()=>(0,o._)("div",{class:"btn__cross"},null,-1))),S=O((()=>(0,o._)("div",{class:"btn__text"},"Удалить отмеченные",-1))),R=[A,S],U={class:"cart__list list"},F={class:"cart__footer footer"},Q={class:"footer__group"},W={class:"cart__beforeTax tax"},H=O((()=>(0,o._)("div",{class:"tax__title"},"Промежуточный итог по корзине:",-1))),Z={class:"tax__sum"},K={class:"cart__tax tax"},L=O((()=>(0,o._)("div",{class:"tax__title"},"В том числе НДС:",-1))),$={class:"tax__sum"},G={class:"cart__total total"},J=O((()=>(0,o._)("div",{class:"total__title"},"Итого:",-1))),Y={class:"total__number"};function B(t,e,a,n,c,i){const r=(0,o.up)("Navigation"),s=(0,o.up)("ItemComponent");return(0,o.wg)(),(0,o.iD)("div",E,[(0,o.Wm)(r),(0,o._)("div",M,[D,(0,o._)("div",j,[(0,o._)("div",q,[(0,o._)("div",N,[P,(0,o._)("div",z,(0,x.zw)(n.checked.length),1)]),(0,o._)("div",{class:"header__btn btn",onClick:e[0]||(e[0]=(...t)=>n.deleteChecked&&n.deleteChecked(...t))},R)]),(0,o._)("ul",U,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.products,((t,e)=>((0,o.wg)(),(0,o.j4)(s,{key:t.id,product_data:t,index:e,onCheckItem:e=>n.OnCheckItem(t)},null,8,["product_data","index","onCheckItem"])))),128))]),(0,o._)("div",F,[(0,o._)("div",Q,[(0,o._)("div",W,[H,(0,o._)("div",Z,(0,x.zw)(n.cartTotal)+" Р",1)]),(0,o._)("div",K,[L,(0,o._)("div",$,(0,x.zw)(n.tax)+" Р",1)])]),(0,o._)("div",G,[J,(0,o._)("div",Y,(0,x.zw)(n.cartTotal)+" Р",1)])])])])])}a(6699);const V=t=>((0,o.dD)("data-v-655ce87e"),t=t(),(0,o.Cn)(),t),X={class:"item"},tt={class:"item__controls"},et={class:"radio radio--checkbox"},at={class:"radio__title"},nt={class:"item__pic"},ot=["src"],ct={class:"item__name"},it={class:"item__info"},rt={class:"item__price"},st={class:"item__quantity"},lt={class:"item__total"},ut={class:"modal"},dt=V((()=>(0,o._)("div",{class:"modal__title"},"Изменить количество",-1))),_t={class:"modal__change change"},pt={class:"change__price"},mt={type:"number",class:"change__input"},vt={type:"number",class:"change__total"},gt={class:"change__btns btns"};function ft(t,e,n,c,i,r){const s=(0,o.up)("modal"),l=(0,o.Q2)("click-outside");return(0,o.wg)(),(0,o.iD)("li",X,[(0,o._)("div",tt,[(0,o._)("label",et,[(0,o._)("input",{type:"checkbox",class:"radio__elem",onClick:e[0]||(e[0]=t=>c.checkItem(n.product_data))}),(0,o._)("div",at,(0,x.zw)(n.index+1),1)])]),(0,o._)("div",nt,[(0,o._)("img",{class:"item__img",src:a(990)("./"+n.product_data.image),alt:"image"},null,8,ot)]),(0,o._)("div",ct,(0,x.zw)(n.product_data.name),1),(0,o._)("div",it,[(0,o._)("div",rt,(0,x.zw)(n.product_data.price)+" Р",1),(0,o._)("div",st,[(0,o._)("button",{type:"button",class:"item__button",onClick:e[1]||(e[1]=(...t)=>c.toggleModal&&c.toggleModal(...t))},(0,x.zw)(n.product_data.quantity),1)]),(0,o._)("div",lt,(0,x.zw)(c.totalInCart)+" Р",1)]),c.modalActive?((0,o.wg)(),(0,o.j4)(s,{key:0},{modal:(0,o.w5)((()=>[(0,o.wy)(((0,o.wg)(),(0,o.iD)("div",ut,[dt,(0,o._)("div",_t,[(0,o._)("div",pt,(0,x.zw)(n.product_data.price)+" x",1),(0,o._)("button",{type:"button",class:"change__btn",onClick:e[2]||(e[2]=(...t)=>c.decreaseItemQuantity&&c.decreaseItemQuantity(...t))}," - "),(0,o._)("span",mt,(0,x.zw)(c.quantityInModal),1),(0,o._)("button",{type:"button",class:"change__btn",onClick:e[3]||(e[3]=(...t)=>c.increaseItemQuantity&&c.increaseItemQuantity(...t))}," + "),(0,o._)("span",vt,(0,x.zw)(c.totalInModal)+" Р",1)]),(0,o._)("div",gt,[(0,o._)("button",{type:"button",class:"btns__save",onClick:e[4]||(e[4]=t=>{c.saveNumberToStore(),c.modalActive=!1})}," сохранить "),(0,o._)("button",{type:"button",class:"btns__decline",onClick:e[5]||(e[5]=(...t)=>c.toggleModal&&c.toggleModal(...t))}," отменить ")])])),[[l,c.toggleModal]])])),_:1})):(0,o.kq)("",!0)])}function ht(t,e,a,n,c,i){return(0,o.WI)(t.$slots,"modal")}var bt={name:"ModalWindow"};const yt=(0,r.Z)(bt,[["render",ht]]);var Ct=yt,kt=a(2262),wt=a(3907),Tt=a(425),It=a.n(Tt),xt={name:"ItemComponent",directives:{clickOutside:It().directive},components:{modal:Ct},props:{product_data:{type:Object,default(){return{}}},index:{type:Number}},emits:["checkItem"],setup(t,{emit:e}){const a=(0,wt.oR)(),n=(0,kt.iH)(1),c=(0,kt.iH)(!1),i=()=>{c.value=!c.value,n.value=t.product_data.quantity},r=()=>{n.value++},s=()=>{n.value>1&&n.value--},l=(0,o.Fl)((()=>{let e=t.product_data.price*n.value;return e})),u=(0,o.Fl)((()=>{let e=t.product_data.price*t.product_data.quantity;return e})),d=()=>{a.dispatch("saveToStore",{quantityInModalToCart:n.value,index:t.index})},_=t=>{e("checkItem",t)};return{quantityInModal:n,modalActive:c,toggleModal:i,increaseItemQuantity:r,decreaseItemQuantity:s,totalInModal:l,totalInCart:u,saveNumberToStore:d,checkItem:_}}};const Ot=(0,r.Z)(xt,[["render",ft],["__scopeId","data-v-655ce87e"]]);var Et=Ot,Mt={name:"CartComponent",components:{ItemComponent:Et,Navigation:k},setup(){const t=(0,wt.oR)(),e=(0,kt.iH)([]);(0,o.bv)((()=>{t.dispatch("fetchProducts")}));const a=t=>{if(e.value.includes(t)){let a=e.value.indexOf(t);e.value.splice(a,1)}else e.value.push(t)},n=()=>{t.dispatch("deleteCheckedItem",e.value),e.value=[]};return{products:(0,o.Fl)((()=>t.state.products)),cartTotal:(0,o.Fl)((()=>t.getters.cartTotal)),tax:(0,o.Fl)((()=>Math.round(t.getters.cartTotal/100*18))),checked:e,OnCheckItem:a,deleteChecked:n}}};const Dt=(0,r.Z)(Mt,[["render",B],["__scopeId","data-v-6a7b86b0"]]);var jt=Dt,qt=[{path:"/",name:"MainPage",component:I},{path:"/cart",name:"Cart",component:jt}];const Nt=(0,u.p7)({history:(0,u.r5)(),routes:qt});var Pt=Nt,zt=JSON.parse('{"data":[{"image":"img1.jpg","name":"Нож складной WENGER","price":990,"id":1,"quantity":1},{"image":"img2.jpg","name":"Рюкзак WENGER","price":5500,"id":2,"quantity":1},{"image":"img3.png","name":"Перьевая ручка Waterman","price":450,"id":3,"quantity":1}]}');const At=(0,wt.MT)({state:{products:[]},mutations:{PUT_PRODUCTS_TO_STATE:(t,e)=>{t.products=e},UPDATE_CART:(t,e)=>{t.products[e.index].quantity=e.quantityInModalToCart},DELETE_CHECKED:(t,e)=>{t.products=t.products.filter((t=>!e.includes(t)))}},actions:{async fetchProducts({commit:t}){try{const{data:e}=zt;t("PUT_PRODUCTS_TO_STATE",e)}catch(e){console.log(e)}},async saveToStore({commit:t},e){t("UPDATE_CART",e)},async deleteCheckedItem({commit:t},e){t("DELETE_CHECKED",e)}},getters:{cartTotal:t=>{let e=[];if(t.products.length){for(let a of t.products)e.push(a.price*a.quantity);return e=e.reduce((function(t,e){return t+e})),e}return 0}}});var St=At;const Rt=(0,n.ri)(l);Rt.use(Pt),Rt.use(St),Rt.mount("#app")},990:function(t,e,a){var n={"./img1.jpg":2476,"./img2.jpg":1213,"./img3.png":2954};function o(t){var e=c(t);return a(e)}function c(t){if(!a.o(n,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return n[t]}o.keys=function(){return Object.keys(n)},o.resolve=c,t.exports=o,o.id=990},2476:function(t,e,a){"use strict";t.exports=a.p+"img/img1.b693e2e5.jpg"},1213:function(t,e,a){"use strict";t.exports=a.p+"img/img2.e19a2ca7.jpg"},2954:function(t,e,a){"use strict";t.exports=a.p+"img/img3.b6fc1ef0.png"}},e={};function a(n){var o=e[n];if(void 0!==o)return o.exports;var c=e[n]={exports:{}};return t[n].call(c.exports,c,c.exports,a),c.exports}a.m=t,function(){var t=[];a.O=function(e,n,o,c){if(!n){var i=1/0;for(u=0;u<t.length;u++){n=t[u][0],o=t[u][1],c=t[u][2];for(var r=!0,s=0;s<n.length;s++)(!1&c||i>=c)&&Object.keys(a.O).every((function(t){return a.O[t](n[s])}))?n.splice(s--,1):(r=!1,c<i&&(i=c));if(r){t.splice(u--,1);var l=o();void 0!==l&&(e=l)}}return e}c=c||0;for(var u=t.length;u>0&&t[u-1][2]>c;u--)t[u]=t[u-1];t[u]=[n,o,c]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){a.d=function(t,e){for(var n in e)a.o(e,n)&&!a.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){a.p="/loft_test_task/"}(),function(){var t={143:0};a.O.j=function(e){return 0===t[e]};var e=function(e,n){var o,c,i=n[0],r=n[1],s=n[2],l=0;if(i.some((function(e){return 0!==t[e]}))){for(o in r)a.o(r,o)&&(a.m[o]=r[o]);if(s)var u=s(a)}for(e&&e(n);l<i.length;l++)c=i[l],a.o(t,c)&&t[c]&&t[c][0](),t[c]=0;return a.O(u)},n=self["webpackChunktest_task"]=self["webpackChunktest_task"]||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))}();var n=a.O(void 0,[998],(function(){return a(1551)}));n=a.O(n)})();
//# sourceMappingURL=app.235866ef.js.map